Create multiple REAL users -– lets call them “larry”, “bill”, “steve”, “mukesh”, ‘azim, ‘mark’ etc. (whatever you feel like). You would add these using the actual adduser command. Their home directories should be inside the simple slash directory that you created earlier. The di- rectories could have names like simple slash/home/larry (for user larry). The /etc/passwd file should reflect these users and their home directories. You also need a secondary ‘root’ users, lets call it ‘fakeroot’. The directories ‘simple slash’ and ‘simple slash/home’ should have ‘fakeroot’ as their owner.
You need to implement ACLs, through setuid, which should override DAC. These ACLs would be stored with the files (as a header). One way to do this is to use a C(C++) structure/class that has an array of strings representing ACLs, along with a pointer to a character buffer which can be modified based on the number of ACL entries in the file. E.g.

```
struct file data{
unsigned int acl len; // Number of acl strings unsigned char **acl; // ACL strings
unsigned int data len; // Number of bytes of ‘data’ unsigned char *data; // File data
}
```
You may borrow concepts from what you understand of Linux ACLs. Access to the ACL would be via programs called ‘setacl’ and ‘getacl’. These would be individual binaries with their setuid bit turned on and their default owners would be ‘fakeroot’. Whenever these programs are invoked they determine the actual user ID of the invoking program using getuid() system call. Thereafter the program needs to check the ACL entries of the file to determine if at all the user is allowed to modified them or not. If the program decides to grant access to the invoking program to modify the ACLs, it must switches the user ID to the actual owner of the target file (using seteuid() family of system calls) and proceeds with the ACL modifications. Else, the program fails gracefully, printing a permission denial message.
1
You also need to implement individual programs for ‘fput’, ‘fget’, ‘cd’ and ‘create dir’ which would also be setuid programs, owned by ‘fakeroot’. Similar to the ‘setacl’ and ‘getacl’ programs, these programs also check the invoking user ID and determine if it has permissions to perform the operation corresponding to the program or not. The default ACL values for a newly created file should be same as the DAC bits. However, the subsequent access to the file must be via the above programs and must be mediated through the ACLs.
